<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Blocked Weighted Bootstrap • bbw</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Blocked Weighted Bootstrap">
<meta name="description" content="The blocked weighted bootstrap (BBW) is an estimation technique for use with data from two-stage cluster sampled surveys in which either prior weighting (e.g. population-proportional sampling or PPS as used in Standardized Monitoring and Assessment of Relief and Transitions or SMART surveys) or posterior weighting (e.g. as used in rapid assessment method or RAM and simple spatial sampling method or S3M surveys) is implemented. See Cameron et al (2008) &lt;doi:10.1162/rest.90.3.414&gt; for application of bootstrap to cluster samples. See Aaron et al (2016) &lt;doi:10.1371/journal.pone.0163176&gt; and Aaron et al (2016) &lt;doi:10.1371/journal.pone.0162462&gt; for application of the blocked weighted bootstrap to estimate indicators from two-stage cluster sampled surveys.">
<meta property="og:description" content="The blocked weighted bootstrap (BBW) is an estimation technique for use with data from two-stage cluster sampled surveys in which either prior weighting (e.g. population-proportional sampling or PPS as used in Standardized Monitoring and Assessment of Relief and Transitions or SMART surveys) or posterior weighting (e.g. as used in rapid assessment method or RAM and simple spatial sampling method or S3M surveys) is implemented. See Cameron et al (2008) &lt;doi:10.1162/rest.90.3.414&gt; for application of bootstrap to cluster samples. See Aaron et al (2016) &lt;doi:10.1371/journal.pone.0163176&gt; and Aaron et al (2016) &lt;doi:10.1371/journal.pone.0162462&gt; for application of the blocked weighted bootstrap to estimate indicators from two-stage cluster sampled surveys.">
<meta property="og:image" content="https://rapidsurveys.io/bbw/logo.png">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">bbw</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.6.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/bbw.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/bbw-estimation.html">Blocked weighted bootstrap estimation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://fosstodon.org/@katilingban" aria-label="Mastodon"><span class="fa fab fa-mastodon fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.linkedin.com/company/katilingban" aria-label="LinkedIn"><span class="fa fab fa-linkedin fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rapidsurveys/bbw/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="bbw-blocked-weighted-bootstrap-">bbw: Blocked Weighted Bootstrap <a class="anchor" aria-label="anchor" href="#bbw-blocked-weighted-bootstrap-"></a>
</h1>
</div>
<!-- badges: start -->

<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <strong>blocked weighted bootstrap</strong> is an estimation technique for use with data from two-stage cluster sampled surveys in which either prior weighting (e.g. <em>population-proportional sampling</em> or <em>PPS</em> as used in <a href="https://smartmethodology.org/" class="external-link">Standardized Monitoring and Assessment of Relief and Transitions (SMART)</a> surveys) or <em>posterior weighting</em> (e.g. as used in <a href="https://rapidsurveys.io/ramOPmanual/" class="external-link">Rapid Assessment Method (RAM)</a> and <a href="https://researchonline.lshtm.ac.uk/id/eprint/2572543" class="external-link">Simple Spatial Sampling Method (S3M)</a> surveys) is implemented.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install <a href="https://github.com/rapidsurveys/bbw" class="external-link">bbw</a> from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"bbw"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the current development version of <a href="https://github.com/rapidsurveys/bbw" class="external-link">bbw</a> from the <a href="https://rapidsurveys.r-universe.dev" class="external-link">RapidSurveys R Universe</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"bbw"</span>, repos <span class="op">=</span> <span class="st">"https://rapidsurveys.r-universe.dev"</span><span class="op">)</span></span></code></pre></div>
<p>or through GitHub via the <a href="https://pak.r-lib.org/" class="external-link">pak</a> package with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://pak.r-lib.org/" class="external-link">pak</a></span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"pak"</span><span class="op">)</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"rapidsurveys/bbw"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p><a href="https://github.com/rapidsurveys/bbw" class="external-link">bbw</a> as used in RAM and S3M is a modification to the <em>percentile bootstrap</em> to include <em>blocking</em> and <em>weighting</em> to account for a <em>complex sample design</em>.</p>
<p>With RAM and S3M surveys, the sample is complex in the sense that it is an unweighted cluster sample. Data analysis procedures need to account for the sample design. A blocked weighted bootstrap can be used:</p>
<p><br></p>
<ul>
<li><p><strong>Blocked</strong>: The block corresponds to the primary sampling unit (<em>PSU = cluster</em>). PSUs are resampled with replacement. Observations within the resampled PSUs are also sampled with replacement.</p></li>
<li><p><strong>Weighted</strong>: RAM and S3M samples do not use population proportional sampling (PPS) to weight the sample prior to data collection (e.g. as is done with SMART surveys). This means that a posterior weighting procedure is required. <a href="https://github.com/rapidsurveys/bbw" class="external-link">bbw</a> uses a <em>“roulette wheel”</em> algorithm (see <a href="#fig1">illustration below</a>) to weight (i.e. by population) the selection probability of PSUs in bootstrap replicates.</p></li>
</ul>
<p><a name="fig1"></a></p>
<p align="center">
</p>
<p><img src="reference/figures/rouletteWheel.png" alt="Roulette wheel algorithm" width="50%" style="display: block; margin: auto;"></p>

<p>In the case of prior weighting by PPS all clusters are given the same weight. With posterior weighting (as in RAM or S3M) the weight is the population of each PSU. This procedure is very similar to the <a href="https://en.wikipedia.org/wiki/Fitness_proportionate_selection" class="external-link"><em>fitness proportional selection</em></a> technique used in <em>evolutionary computing</em>.</p>
<p>A total of <code>m</code> PSUs are sampled with replacement for each bootstrap replicate (where <code>m</code> is the number of PSUs in the survey sample).</p>
<p>The required statistic is applied to each replicate. The reported estimate consists of the 0.025th (<em>95% LCL</em>), 0.5th (<em>point estimate</em>), and 0.975th (<em>95% UCL</em>) quantiles of the distribution of the statistic across all survey replicates.</p>
<p>The main reason to use <a href="https://github.com/rapidsurveys/bbw" class="external-link">bbw</a> is that the bootstrap allows a wider range statistics to be calculated than model-based techniques without resort to grand assumptions about the sampling distribution of the required statistic. A good example for this is the confidence interval on the difference between two medians which might be used for many socio-economic variables. The <a href="https://github.com/rapidsurveys/bbw" class="external-link">bbw</a> also allows for a wider range of hypothesis tests to be used with complex sample survey data.</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>If you use the {bbw} package in your work, please cite using the suggested citation provided by a call to the <code><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation()</a></code> function as follows:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"bbw"</span><span class="op">)</span></span>
<span><span class="co">#&gt; To cite bbw in publications use:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Mark Myatt, Ernest Guevarra (2025). _bbw: Blocked</span></span>
<span><span class="co">#&gt;   Weighted Bootstrap_. doi:10.5281/zenodo.6594797</span></span>
<span><span class="co">#&gt;   &lt;https://doi.org/10.5281/zenodo.6594797&gt;, R package</span></span>
<span><span class="co">#&gt;   version 0.2.3, &lt;https://rapidsurveys.io/bbw/&gt;.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   @Manual{,</span></span>
<span><span class="co">#&gt;     title = {bbw: Blocked Weighted Bootstrap},</span></span>
<span><span class="co">#&gt;     author = {{Mark Myatt} and {Ernest Guevarra}},</span></span>
<span><span class="co">#&gt;     year = {2025},</span></span>
<span><span class="co">#&gt;     note = {R package version 0.2.3},</span></span>
<span><span class="co">#&gt;     url = {https://rapidsurveys.io/bbw/},</span></span>
<span><span class="co">#&gt;     doi = {10.5281/zenodo.6594797},</span></span>
<span><span class="co">#&gt;   }</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="community-guidelines">Community guidelines<a class="anchor" aria-label="anchor" href="#community-guidelines"></a>
</h2>
<p>Feedback, bug reports, and feature requests are welcome; file issues or seek support <a href="https://github.com/rapidsurveys/bbw/issues" class="external-link">here</a>. If you would like to contribute to the package, please see our <a href="https://rapidsurveys.io/bbw/CONTRIBUTING.html">contributing guidelines</a>.</p>
<p>This project is released with a <a href="https://rapidsurveys.io/bbw/CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=bbw" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/rapidsurveys/bbw/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/rapidsurveys/bbw/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing bbw</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Mark Myatt <br><small class="roles"> Author, copyright holder </small>  </li>
<li>Ernest Guevarra <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0002-4887-4415" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable" class="external-link"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://cran.r-project.org/package=bbw" class="external-link"><img src="https://img.shields.io/cran/v/bbw.svg" alt="CRAN"></a></li>
<li><a href="https://CRAN.R-project.org/package=bbw" class="external-link"><img src="https://img.shields.io/cran/l/bbw.svg" alt="CRAN"></a></li>
<li><a href="https://CRAN.R-project.org/package=bbw" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/bbw" alt="CRAN"></a></li>
<li><a href="https://CRAN.R-project.org/package=bbw" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/grand-total/bbw" alt="CRAN"></a></li>
<li><a href="https://github.com/rapidsurveys/bbw/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/rapidsurveys/bbw/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://github.com/rapidsurveys/bbw/actions/workflows/test-coverage.yaml" class="external-link"><img src="https://github.com/rapidsurveys/bbw/actions/workflows/test-coverage.yaml/badge.svg" alt="test-coverage"></a></li>
<li><a href="https://codecov.io/gh/rapidsurveys/bbw" class="external-link"><img src="https://codecov.io/gh/rapidsurveys/bbw/graph/badge.svg?token=edgQexvxhi" alt="codecov"></a></li>
<li><a href="https://www.codefactor.io/repository/github/rapidsurveys/bbw" class="external-link"><img src="https://www.codefactor.io/repository/github/rapidsurveys/bbw/badge" alt="CodeFactor"></a></li>
<li><a href="https://doi.org/10.5281/zenodo.6594797" class="external-link"><img src="https://zenodo.org/badge/117305174.svg" alt="DOI"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mark Myatt, Ernest Guevarra.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
