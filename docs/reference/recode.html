<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Utility function that recodes variables based on user recode specifications.
Handles both numeric or factor variables."><title>Recode — recode • bbw</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Recode — recode"><meta property="og:description" content="Utility function that recodes variables based on user recode specifications.
Handles both numeric or factor variables."><meta property="og:image" content="https://rapidsurveys.io/bbw/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">bbw</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/bbw.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rapidsurveys/bbw/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Recode</h1>
      <small class="dont-index">Source: <a href="https://github.com/rapidsurveys/bbw/blob/HEAD/R/recode.R" class="external-link"><code>R/recode.R</code></a></small>
      <div class="d-none name"><code>recode.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Utility function that recodes variables based on user recode specifications.
Handles both numeric or factor variables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">recode</span><span class="op">(</span><span class="va">var</span>, <span class="va">recodes</span>, <span class="va">afr</span>, anr <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">levels</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>var</dt>
<dd><p>Variable to recode</p></dd>
<dt>recodes</dt>
<dd><p>Character string of recode specifications:</p><ul><li><p>Recode specifications in a character string separated by
semicolons of the form <code>input=output</code> as in:
<code>"1=1;2=1;3:6=2;else=NA"</code></p><div class="sourceCode"><pre><code>\item If an input value satisfies more than one specification, then the
first (reading from left to right) is applied

\item If no specification is satisfied, then the input value is carried
over to the result unchanged

\item \code{NA} is allowed on both input and output

\item The following recode specifications are supported:

    \tabular{lll}{
      \strong{Specification} \tab \strong{Example}          \tab \strong{Notes}                                                 \cr
      Single values          \tab \code{9=NA}               \tab                                                                \cr
      Set of values          \tab \code{c(1,2,5)=1}         \tab The left-hand-side is any R function call that returns a vector\cr
                             \tab \code{seq(1,9,2)='odd'}   \tab                                                                \cr
                             \tab \code{1:10=1}             \tab                                                                \cr
      Range of values        \tab \code{7:9=3}              \tab Special values \code{lo} and \code{hi} may be used             \cr
                             \tab \code{lo:115=1}           \tab                                                                \cr
      Other values           \tab \code{else=NA}            \tab
    }

\item Character values are quoted as in :

     \code{recodes = "c(1,2,5)='sanitary' else='unsanitary'"}

\item The output may be the (scalar) result of a function call as in:

     \code{recodes = "999=median(var, na.rm = TRUE)"}

\item Users are advised to carefully check the results of \code{recode()} calls
with any outputs that are the results of a function call.

\item The output may be the (scalar) value of a variable as in:

     \code{recodes = "999=scalarVariable"}

\item If all of the output values are numeric, and if \code{'afr'} is \code{FALSE},
then a numeric result is returned; if \code{var} is a factor then
(by default) so is the result.
</code></pre></div></li>
</ul></dd>
<dt>afr</dt>
<dd><p>Return a factor. Default is TRUE if <code>var</code> is a factor and is
FALSE otherwise</p></dd>
<dt>anr</dt>
<dd><p>Coerce result to numeric (default is TRUE)</p></dd>
<dt>levels</dt>
<dd><p>Order of the levels in the returned factor; the default is to use
the sort order of the level names.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Recoded variable</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># Recode values from 1 to 9 to varios specifications</span></span>
<span class="r-in"><span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">9</span>, size <span class="op">=</span> <span class="fl">100</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Recode single values</span></span>
<span class="r-in"><span class="fu">recode</span><span class="op">(</span>var <span class="op">=</span> <span class="va">var</span>, recodes <span class="op">=</span> <span class="st">"9=NA"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1]  4  3  6  8  7 NA  3 NA  1  6 NA  7  1 NA  1  8  3  3  3  2  4  1  3  3  4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [26]  6  6  1  4 NA  3  4  1  6  8  2  8  8  3  8  3  3  7  5  2  5  7  5  4  6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [51]  3  8  7  7  8  4  3  5  6  8  8  7  8  8  7  3  3  2  5  7  2  6  5 NA  3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [76]  6 NA  4  2  8  1  4 NA  1  5  8  1  4  5  6  4  2 NA NA  6  4 NA  4  4  8</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Recode set of values</span></span>
<span class="r-in"><span class="fu">recode</span><span class="op">(</span>var <span class="op">=</span> <span class="va">var</span>, recodes <span class="op">=</span> <span class="st">"c(1,2,5)=1"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] 4 3 6 8 7 9 3 9 1 6 9 7 1 9 1 8 3 3 3 1 4 1 3 3 4 6 6 1 4 9 3 4 1 6 8 1 8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [38] 8 3 8 3 3 7 1 1 1 7 1 4 6 3 8 7 7 8 4 3 1 6 8 8 7 8 8 7 3 3 1 1 7 1 6 1 9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [75] 3 6 9 4 1 8 1 4 9 1 1 8 1 4 1 6 4 1 9 9 6 4 9 4 4 8</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Recode range of values</span></span>
<span class="r-in"><span class="fu">recode</span><span class="op">(</span>var <span class="op">=</span> <span class="va">var</span>, recodes <span class="op">=</span> <span class="st">"1:3=1;4:6=2;7:9=3"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] 2 1 2 3 3 3 1 3 1 2 3 3 1 3 1 3 1 1 1 1 2 1 1 1 2 2 2 1 2 3 1 2 1 2 3 1 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [38] 3 1 3 1 1 3 2 1 2 3 2 2 2 1 3 3 3 3 2 1 2 2 3 3 3 3 3 3 1 1 1 2 3 1 2 2 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [75] 1 2 3 2 1 3 1 2 3 1 2 3 1 2 2 2 2 1 3 3 2 2 3 2 2 3</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Recode other values</span></span>
<span class="r-in"><span class="fu">recode</span><span class="op">(</span>var <span class="op">=</span> <span class="va">var</span>, recodes <span class="op">=</span> <span class="st">"c(1,2,5)=1;else=NA"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   [1] NA NA NA NA NA NA NA NA  1 NA NA NA  1 NA  1 NA NA NA NA  1 NA  1 NA NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [26] NA NA  1 NA NA NA NA  1 NA NA  1 NA NA NA NA NA NA NA  1  1  1 NA  1 NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [51] NA NA NA NA NA NA NA  1 NA NA NA NA NA NA NA NA NA  1  1 NA  1 NA  1 NA NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [76] NA NA NA  1 NA  1 NA NA  1  1 NA  1 NA  1 NA NA  1 NA NA NA NA NA NA NA NA</span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Mark Myatt, Ernest Guevarra.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

